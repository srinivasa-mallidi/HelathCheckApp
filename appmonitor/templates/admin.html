{% extends "base.html" %}
{% block content %}

<style>
/* ===== ADMIN UI ===== */

.page-title {
    font-size: 26px;
    font-weight: 600;
    margin-bottom: 6px;
}

.subtitle {
    color: #6b7280;
    margin-bottom: 24px;
}

.card {
    background: #ffffff;
    border-radius: 12px;
    padding: 22px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    margin-bottom: 30px;
}

.card h2 {
    font-size: 18px;
    margin-bottom: 16px;
    font-weight: 600;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 14px;
}

input, select {
    padding: 10px 12px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    font-size: 14px;
}

button {
    padding: 10px 16px;
    border-radius: 8px;
    border: none;
    font-weight: 600;
    cursor: pointer;
}

.btn-primary {
    background: #facc15;
    color: #000;
}

.btn-secondary {
    background: #e5e7eb;
}

.btn-danger {
    background: #dc2626;
    color: #fff;
}

.table-wrap {
    overflow-x: auto;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th {
    background: #f9fafb;
    text-transform: uppercase;
    font-size: 12px;
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
    text-align: left;
}

td {
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
    font-size: 14px;
}

.status-active {
    color: #16a34a;
    font-weight: 600;
}

.status-inactive {
    color: #6b7280;
    font-style: italic;
}

.actions a {
    margin-right: 8px;
    font-size: 13px;
    font-weight: 600;
}

.actions a:hover {
    text-decoration: underline;
}
</style>

<!-- ================= HEADER ================= -->

<div class="page-title">Admin Console</div>
<p class="subtitle">
Manage applications, interfaces and monitoring configuration
</p>

<!-- ================= ADD APPLICATION ================= -->

<div class="card">
    <h2>Add Application</h2>

    <form method="post" action="/admin/application/add" class="form-grid">
        <input name="name" placeholder="Application Name" required>
        <input name="environment" placeholder="Environment (PROD / UAT)" required>
        <input name="health_url" placeholder="Application Health URL" required>
        <input name="users_url" placeholder="Logged-In Users URL" required>

        <button class="btn-primary">Add Application</button>
    </form>
</div>

<!-- ================= APPLICATION LIST ================= -->

<div class="card">
    <h2>Applications</h2>

    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Environment</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                {% for app in applications %}
                <tr>
                    <td>{{ app.name }}</td>
                    <td>{{ app.environment }}</td>
                    <td>
                        {% if app.is_active %}
                            <span class="status-active">Active</span>
                        {% else %}
                            <span class="status-inactive">Inactive</span>
                        {% endif %}
                    </td>
                    <td class="actions">
                        <a href="/admin/application/{{ app.id }}/edit" class="btn small">Edit</a>
                        <a href="/admin/application/{{ app.id }}/interfaces" class="btn small">Interfaces</a>
                        {% if app.is_active %}
                            <a href="/admin/application/{{ app.id }}/deactivate"
                               onclick="return confirm('Deactivate application?')">
                                Deactivate
                            </a>
                        {% else %}
                            <a href="/admin/application/{{ app.id }}/activate"
                               onclick="return confirm('Activate application?')">
                                Activate
                            </a>
                        {% endif %}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="status-inactive">
                        No applications configured
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
